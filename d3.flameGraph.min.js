!function(){"use strict";function t(){function t(t){var n=document.getElementById("details");n&&(n.innerHTML=t)}function n(t){return t.dummy?"":A(t)}function e(t){return t.name}function r(t){var n=0,e=1,r=0,i=10,a=6;if(t){for(var u=0;u<t.length&&!(u>a);u++)n+=e*(t.charCodeAt(u)%i),r+=e*(i-1),e*=.7;r>0&&(n/=r)}return n}function i(t){var n=0;t&&(t=t.replace(/.*`/,""),t=t.replace(/\(.*/,""),n=r(t));var e=200+Math.round(55*n),i=0+Math.round(230*(1-n)),a=0+Math.round(55*(1-n));return"rgb("+e+","+i+","+a+")"}function a(t){if(t.children&&t.children.length>0){t.children.forEach(a);var n=0;t.children.forEach(function(t){n+=t.value}),n<t.value&&t.children.push({name:"",value:t.value-n,dummy:!0})}}function u(t){t.original||(t.original=t.value),t.value=0,t.children&&t.children.forEach(u)}function c(t){t.fade=!1,t.original&&(t.value=t.original),t.children&&t.children.forEach(c)}function o(t){var n=[];if(t.parent){var e=t.parent.children.indexOf(t);n=t.parent.children.slice(0),n.splice(e,1)}return n}function l(t){var n=o(t);n.forEach(function(t){u(t)}),t.parent&&l(t.parent)}function f(t){t.parent&&(t.parent.fade=!0,f(t.parent))}function h(t){k.hide(t),l(t),c(t),f(t),m()}function d(t,n){var e=new RegExp(n),r=t.name;t.children&&t.children.forEach(function(t){d(t,n)}),r.match(e)?t.highlight=!0:t.highlight=!1}function s(t){t.highlight=!1,t.children&&t.children.forEach(function(t){s(t,term)})}function g(t,n){return"function"==typeof j?j(t,n):j?d3.ascending(t.name,n.name):0}function m(){E.each(function(r){var a=d3.scale.linear().range([0,v]),u=d3.scale.linear().range([0,y]),c=H(r),o=v/r.dx,l=d3.select(this).select("svg").selectAll("g").data(c);l.transition().duration(M).ease(O).attr("transform",function(t){return"translate("+a(t.x)+","+(x-u(t.depth)-y)+")"}),l.select("rect").transition().duration(M).ease(O).attr("width",function(t){return t.dx*o});var f=l.enter().append("svg:g").attr("transform",function(t){return"translate("+a(t.x)+","+(x-u(t.depth)-y)+")"});f.append("svg:rect").attr("width",function(t){return t.dx*o}),b||f.append("svg:title"),f.append("foreignObject").append("xhtml:div"),l.attr("width",function(t){return t.dx*o}).attr("height",function(t){return y}).attr("name",function(t){return t.name}).attr("class",function(t){return t.fade?"frame fade":"frame"}),l.select("rect").attr("height",function(t){return y}).attr("fill",function(t){return t.highlight?"#E600E6":i(t.name)}).style("visibility",function(t){return t.dummy?"hidden":"visible"}),b||l.select("title").text(n),l.select("foreignObject").attr("width",function(t){return t.dx*o}).attr("height",function(t){return y}).select("div").attr("class","label").style("display",function(t){return t.dx*o<35||t.dummy?"none":"block"}).text(e),l.on("click",h),l.exit().remove(),l.on("mouseover",function(e){e.dummy||(b&&k.show(e),t(n(e)))}).on("mouseout",function(n){n.dummy||(b&&k.hide(n),t(""))})})}function p(t){return E=t,arguments.length?void E.each(function(t){var n=d3.select(this).append("svg:svg").attr("width",v).attr("height",x).attr("class","partition d3-flame-graph").call(k);n.append("svg:text").attr("class","title").attr("text-anchor","middle").attr("y","25").attr("x",v/2).attr("fill","#808080").text(w),a(t),H(t),m()}):p}var v=960,x=540,y=18,E=null,b=!0,w="",M=750,O="cubic-in-out",j=!0,k=d3.tip().direction("s").offset([8,0]).attr("class","d3-flame-graph-tip").html(function(t){return n(t)}),A=function(t){return t.name+" ("+d3.round(100*t.dx,3)+"%, "+t.value+" samples)"},H=d3.layout.partition().sort(g).value(function(t){return t.v||t.value}).children(function(t){return t.c||t.children});return p.height=function(t){return arguments.length?(x=t,p):x},p.width=function(t){return arguments.length?(v=t,p):v},p.cellHeight=function(t){return arguments.length?(y=t,p):y},p.tooltip=function(t){return arguments.length?("function"==typeof t&&(k=t),b=!0,p):b},p.title=function(t){return arguments.length?(w=t,p):w},p.transitionDuration=function(t){return arguments.length?(M=t,p):M},p.transitionEase=function(t){return arguments.length?(O=t,p):O},p.sort=function(t){return arguments.length?(j=t,p):j},p.label=function(t){return arguments.length?(A=t,p):A},p.search=function(t){E.each(function(n){d(n,t),m()})},p.clear=function(){E.each(function(t){s(t),m()})},p.resetZoom=function(){E.each(function(t){h(t)})},p}"undefined"!=typeof module&&module.exports?module.exports=t:d3.flameGraph=t}();